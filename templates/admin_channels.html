{{define "admin_channels"}}
{{template "admin_layout" .}}
{{end}}

{{define "admin_channels_body"}}
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h1>Channels</h1>
        <a href="/admin/channels/new" class="btn">+ Add Channel</a>
    </div>

    <form method="get" action="/admin/channels" style="display:flex; gap: 10px; margin-bottom: 20px;">
        <input type="search" name="search" placeholder="Search by name or login..." value="{{.Search}}" style="padding: 8px; background: #333; border: 1px solid #444; color: white; border-radius: 4px; width: 300px;">
        <button type="submit" class="btn" style="padding: 8px 16px;">Search</button>
        {{if .Search}}
        <a href="/admin/channels" class="btn" style="background-color: #666; padding: 8px 16px;">Clear</a>
        {{end}}
    </form>

    {{if not .Channels}}
        <p style="text-align:center; margin-top:50px; color:#888;">No channels found.</p>
    {{else}}
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Twitch Login</th>
                    <th>Published</th>
                    <th>Sort Weight</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{range .Channels}}
                <tr>
                    <td>{{.Name}}</td>
                    <td>
                        <a href="https://twitch.tv/{{.Slug}}" target="_blank" style="color:#a88aff; text-decoration:none;">
                            {{.Slug}} â†—
                        </a>
                    </td>
                    <td>{{if .Published}}Yes{{else}}No{{end}}</td>
                    <td>{{.SortWeight}}</td>
                    <td>
                        <div style="display:flex; gap: 10px;">
                            <a href="/admin/channels/{{.ID}}/edit" class="btn" style="background-color: #2196f3; padding: 6px 12px; font-size: 0.9em;">Edit</a>
                            <form method="post" action="/admin/channels/{{.ID}}/delete" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete {{.Name}}?');">
                                <button type="submit" style="background-color: #f44336; padding: 6px 12px; font-size: 0.9em; color: white; border: none; border-radius: 4px; cursor: pointer;">Delete</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    {{end}}
{{end}}
