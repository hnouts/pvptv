{{define "class"}}
<!DOCTYPE html>
<html lang="en">

<head>
    {{template "head" .}}
</head>

<body>
    <div class="shell fill background">
        <!-- SIDEBAR (Specific to Class) -->
        <div class="nav">
            <div class="app-title hspace-out middle">
                <header>
                    <a class="hApp focus glow" href="/">â†© HOME</a>
                </header>
            </div>

            <nav class="nav-content" style="display: flex; flex-direction: column;">
                <div class="nav-streams-class-selected" style="flex: 1;">
                    <div class="nav-streams-stack">
                        <div class="hspace-out">
                            <div class="separator" style="margin-top: 20px;"></div>
                            <h3 class="h3">STREAMING</h3>
                            {{range .Channels}}
                            {{$stream := index . "stream"}}
                            {{$online := index $stream "online"}}
                            {{$game := index $stream "game"}}
                            {{if and $online (eq $game "World of Warcraft")}}
                            {{$slug := index . "slug"}}
                            {{$name := index . "name"}}
                            {{$viewers := index $stream "viewers"}}
                            {{$iconType := index . "iconType"}}
                            {{$specIconPath := index . "specIconPath"}}
                            <div class="stream-label-style">
                                <a class="link glow {{$iconType}}" href="/{{$.ClassSlug}}/{{$slug}}" id="{{$slug}}">
                                    <img class="icon-circle"
                                        src="{{if $specIconPath}}{{$specIconPath}}{{else}}/assets/icons/{{$.ClassSlug}}.jpg{{end}}"
                                        alt="{{$.ClassName}}" style="width: 24px; height: 24px; margin-right: 8px;">
                                    <span>{{$name}}</span>
                                </a>
                                <span class="viewer-count glow">ðŸ”´ {{$viewers}}</span>
                            </div>
                            {{end}}
                            {{end}}
                            <div class="separator"></div>
                            <h3 class="h3">OFFLINE</h3>
                            {{range .Channels}}
                            {{$stream := index . "stream"}}
                            {{$online := index $stream "online"}}
                            {{$game := index $stream "game"}}
                            {{if or (not $online) (ne $game "World of Warcraft")}}
                            {{$slug := index . "slug"}}
                            {{$name := index . "name"}}
                            <a class="link offlineLink" href="/{{$.ClassSlug}}/{{$slug}}" id="{{$slug}}">
                                <span>{{$name}}</span>
                            </a>
                            {{end}}
                            {{end}}
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="nav-support-home hspace-out"
                    style="margin-top: 0; padding-bottom: 20px; padding-top: 20px;">
                    <a class="nav-support-link glow" href="https://www.buymeacoffee.com/hugodev">
                        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M2,21H20V19H2M20,8H18V5H20M20,3H4V13A4,4 0 0,0 8,17H14A4,4 0 0,0 18,13V10H20A2,2 0 0,0 22,8V5C22,3.89 21.1,3 20,3Z" />
                        </svg>
                        <span>Buy me a coffee</span>
                    </a>
                    <a class="nav-support-link glow" href="https://github.com/hnouts/pvptv">
                        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                        </svg>
                        <span>GitHub</span>
                    </a>
                </div>
            </nav>
        </div>

        <!-- MAIN CONTENT (Player) -->
        <div class="content">
            <div class="stream-player">
                <div id="twitch-player" style="width:100%;height:100%"></div>
            </div>
        </div>
    </div>

    <script src="https://player.twitch.tv/js/embed/v1.js"></script>
    <script>
        // Auto-load first online stream
        {{range .Channels}}
        {{$stream := index . "stream"}}
        {{$online := index $stream "online"}}
        {{$game := index $stream "game"}}
        {{if and $online (eq $game "World of Warcraft")}}
        {{$slug := index . "slug"}}
        var player = new Twitch.Player("twitch-player", {
            channel: "{{$slug}}",
            width: "100%",
            height: "100%",
            parent: window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1" ? ["localhost", "127.0.0.1"] : ["pvptv.hnts.dev", "hnts.dev"]
        });
        // We only want the first one
        {{break}}
        {{end}}
        {{end}}
    </script>
</body>

</html>
{{end}}